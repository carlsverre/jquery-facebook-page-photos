(function(b){function d(a,c,e,k,l){b.getJSON("https://graph.facebook.com/"+a+"/"+c+"?callback=?",{access_token:l.access_token}).success(function(a){"undefined"!==typeof a.error?k(a.error):e(a.data)})}function m(a,c){d(a,"albums",function(a){a=n(a);c.albums_cb(a,function(a){b.isPlainObject(a)&&(a=a.id);h(a,c)})},c.error,c)}function n(a){return b.map(a,function(a){a.cover_photo_url=function(b){"undefined"===typeof b&&(b="small");return"https://graph.facebook.com/"+a.id+"/picture?type="+b};return a})}
function h(a,b){d(a,"photos",function(a){b.render?p(b,a):b.photos_cb(a)},b.error,b)}function p(a,c){var e=a.element;e.html("");b.each(c,function(a,c){var f=c.name||"",d=c.source,g=c.images[c.images.length-1],g=b("<img>").attr("src",g.source).attr("title",f),f=b("<a></a>").attr("title",f).attr("href",d);e.append(f.append(g))})}var q={render:!0,albums_cb:function(){},photos_cb:function(){},error:function(){}};b.extend({FBPagePhotos:function(a){a.render=!1;b().FBPagePhotos(a)}});b.fn.FBPagePhotos=function(a){if("undefined"===
typeof a)return b.error("jQuery.FBPagePhotos is missing the options argument");a=b.extend({},q,a);a.hasOwnProperty("access_token")||b.error("jQuery.FBPagePhotos requires a valid facebook access token with correct permissions");a.render&&(a.element=this);a.hasOwnProperty("page_id")?m(a.page_id,a):a.hasOwnProperty("album_id")?h(a.album_id,a):b.error("jQuery.FBPagePhotos requires either page_id or album_id to be specified in it's options argument")}})(jQuery);
